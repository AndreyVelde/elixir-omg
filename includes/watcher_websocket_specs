<h1 id='watcher-events'>Watcher - Events</h1>
<aside class="warning">TODO Explanation of the WebSocket/ Phoenix Channels mechanism used to receive events</aside> 
<h2 id='topic-transfer-address'>Topic <code>transfer:{address}</code></h2><h3 id='events-address_received-and-address_spent'>Events <code>address_received</code> and <code>address_spent</code></h3>
<blockquote>
<p>An example response of the <code>address_received</code> event:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transfer:0xfd5374cd3fe7ba8626b173a1ca1db68696ff3692"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"child_blknum"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"child_txindex"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
    </span><span class="s2">"child_block_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DB32876CC6F26E96B9291682F3AF4A04C2AA2269747839F14F1A8C529CF90225"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"submited_at_ethheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tx"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"signed_tx"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"raw_tx"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"amount1"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
          </span><span class="s2">"amount2"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blknum1"</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blknum2"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"cur12"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"newowner1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"051902B7A7D6DCB915CE8FFD3BF46B5E0E16BB9C"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"newowner2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E6E3F1307219F68AE4B271CFD493EC8F932C34D9"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"oindex1"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"oindex2"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"txindex1"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"txindex2"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"sig1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7B52AB ..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sig2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ABGAT ..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"signed_tx_bytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F8CF83 ..."</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"signed_tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0768DC526A093C8C058303832FF3AB45893466D731A34BCF1BF2F866586C0FE6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"spender1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6DCB915C051902B7A7DE8FFD3BF46B5E0E16BB9C"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"spender2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5E0E16BB9C19F68AE4B271CFD493EC8F932C34D9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"join_ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address_received"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The address_received event informing about that particular address received funds.</p>

<p>The address_spent event informing about that particular address spent funds.</p>

<p>Both event types have the same structure.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>child_blknum</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>child_txindex</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>child_block_hash</td>
<td>HEX-encoded string</td>
<td></td>
</tr>
<tr>
<td>submited_at_ethheight</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>tx</td>
<td>object</td>
<td>Structure of signed transaction</td>
</tr>
</tbody></table>
<h2 id='topic-childchain'>Topic <code>childchain</code></h2><h3 id='events-new_block'>Events <code>new_block</code></h3>
<blockquote>
<p>An example response of the <code>new_block</code> event:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"childchain"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"blknum"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"block_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0768DC526A093C8C058303832FF3AB45893466D731A34BCF1BF2F866586C0FE6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ethheight"</span><span class="p">:</span><span class="w"> </span><span class="mi">423456</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1543825669</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"join_ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_block"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Informs that a new block has been added to the chain.</p>

<p>Both event types have the same structure.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>blknum</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>block_hash</td>
<td>HEX-encoded string</td>
<td></td>
</tr>
<tr>
<td>ethheight</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td></td>
</tr>
</tbody></table>
<h1 id='rootchain-events'>RootChain - Events</h1>
<p>The RootChain contract raises certain events on Ethereum
<aside class="warning">TODO We may want to forward these events through the watcher</aside> 
<aside class="warning">TODO Most of these events are not currently implemented in the RootChain contract</aside> </p>

<ul>
<li>new_deposit</li>
<li>exit_started</li>
<li>exit_challenged</li>
<li>exit_finalized</li>
<li>fees_exited</li>
</ul>
